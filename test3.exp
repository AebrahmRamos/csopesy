#!/usr/bin/expect -f
set timeout 30

spawn ./csopesy

expect "Enter a command:"
send "initialize\r"

expect "Enter a command:"
send "scheduler-test\r"

# Periodically check screen -ls to catch CPU utilization scenarios
for {set i 0} {$i < 20} {incr i} {
    expect "Enter a command:"
    send "screen -ls\r"
    sleep 3
}

expect "Enter a command:"
send "vmstat\r"

expect "Enter a command:"
send "exit\r"

expect eof